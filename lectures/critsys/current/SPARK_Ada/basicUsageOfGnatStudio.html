<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Basic Usage of Gnatstudio</title>
  </head>

  <body bgcolor="#ffffff" text="#000000">
    <h1>Basic Usage of Gnatstudio</h1>

<ul>
<li> Please note: 
<ul>
<li><font color="red"><strong>Always open gnatstudio by clicking on the main.gpr file.</strong></font>
</li><li> <font color="red"><strong>Don't add files to gnatstudio using drag and drop</strong></font>
<ul>
<li> Spark ada will only check files which are covered by the main.gpr file.
</li><li> If you drag in other files they might not be checked even so they occur on your
      screen.
</li></ul>
</li><li> <font color="red"><strong>If you want to open an ads or adb file</strong></font> 
<ul>
<li>make sure there is a directory containing one project only.
</li><li> Add if necessary a 
<a href="https://bitbucket.org/anton_setzer/criticalhighintegritysystems/src/master/lib/main.gpr">main.gpr</a>
file.
</li><li> Then possibly close any other gnatstudio open and open the main.gpr file.
</li><li> Go to the right pane. You need to click on something with a dot only as name
</li><li> When it expands you should see your files.
</li><li> If you can't see the file common reasons are
<ul>
<li> Your directory or one of the directories in your path contains a blank. 
Rename them by replacing blanks e.g. by underscore.
</li><li> Your filename contains upper case characters. SPARK Ada allows only  files in lower
case.
</li></ul>
</li></ul>
</li></ul>
</li><li> To look at file go the left pane. There is a folder with  a dot.
If you click on it it should expand and show the files in this project.
</li><li> The most interesting file here is the main.adb file. Double click on it to open it.
</li><li> To compile it go to Build &rarr; Project &rarr; Build &lt; current file &gt; <br>
(Note that the main.adb file needs to be the active file shown in the main code area)
<ul>
<li> Compilation will only work for adb files which have no package, and only one procedure having
no parameters (usually called main.adb) 
</li></ul>
</li><li> To execute it choose Build &rarr; Run &rarr; Custom
<ul>
<li>Under Windows use the option "run in an external terminal"
which will open a 
command shell. From  there you can run the program
which is usually called main.exe.
<li> Under Linux make sure you have set it up as follows
<ul>
<li> In gnatstudio, go to 
edit &rarr;  preferences &rarr; External commands &rarr; on right side
change "xterm -hold -e" to "xterm -hold"
<li> Just delete -e, don't copy from the webpage since it might replace - by a 
similar but different symbol.
<li> If you accidentially changed it or have problems later just enter from the keyboard
"xterm -hold"
<li> After setting it up when you execute 
Run &rarr; Custom<br> the command "xterm -hold" should be shown.
<li> Now you click on both "Run in executables directory"
and "Run in an external terminal". 
<ul>
<li> In case your executable file is not main.adb but myfile.adb type in ./myfile
</ul>
<li> You can keep that terminal open and use it for executing the executable again
later.
</ul>
</ul>
<li>When doing those steps the program should open in a terminal. 
<li> It is a very simple program, asking you for a number repeating it and for a string repeating it.
<li> To compile all files (good for testing) use Build &rarr; Project &rarr; Build All
<ul>
<li> This will compile the code but not create executables. The files can be linked
<li> We will not link files in this module, but use this option to test code is correct.
</ul>
<li> To check your code for data flow analysis using spark ada use SPARK &rarr; Examine All
<li> To prove your code for generating verification conditions use 
SPARK &rarr; Prove All
<ul>
<li> I recommend to choose as proof stategy Progressively split
</ul>
<li> To close gnatstudio use first File&rarr; Save an`d then File&rarr; Exit.
<ul>
<li> If it says there are tasks still running it could be that you have a terminal still open
generated by executing some code. Close those terminals (called xterm under  Linux).
</ul>

